# üöÄ Deploy R3SN to Render in 5 Minutes

## Quick Deploy

[![Deploy to Render](https://render.com/images/deploy-to-render-button.svg)](https://render.com/deploy?repo=https://github.com/Nisu7648/R3SN)

---

## Step-by-Step Guide

### 1. Setup MongoDB Atlas (2 minutes)

1. Go to [MongoDB Atlas](https://www.mongodb.com/cloud/atlas/register)
2. Create free account
3. Create free cluster (M0)
4. Database Access ‚Üí Add New Database User
   - Username: `r3sn`
   - Password: Generate secure password
   - Save credentials
5. Network Access ‚Üí Add IP Address
   - Click "Allow Access from Anywhere" (0.0.0.0/0)
6. Get connection string:
   - Clusters ‚Üí Connect ‚Üí Connect your application
   - Copy connection string
   - Replace `<password>` with your password
   - Example: `mongodb+srv://r3sn:YOUR_PASSWORD@cluster0.xxxxx.mongodb.net/r3sn?retryWrites=true&w=majority`

### 2. Deploy to Render (3 minutes)

#### Option A: One-Click Deploy

1. Click "Deploy to Render" button above
2. Sign in with GitHub
3. Fill in environment variables:
   - `MONGODB_URI`: Paste your MongoDB connection string
   - Other variables auto-generate
4. Click "Apply"
5. Wait 5-10 minutes for deployment

#### Option B: Manual Deploy

1. Fork this repository
2. Go to [Render Dashboard](https://dashboard.render.com)
3. New ‚Üí Blueprint
4. Connect your forked repository
5. Render detects `render.yaml` automatically
6. Set `MONGODB_URI` environment variable
7. Click "Apply"

### 3. Verify Deployment

Your app will be live at: `https://r3sn-backend-XXXX.onrender.com`

Test it:
```bash
curl https://your-app.onrender.com/health
```

Expected response:
```json
{
  "success": true,
  "status": "healthy",
  "checks": {
    "server": "healthy",
    "database": "healthy",
    "cache": "healthy"
  }
}
```

---

## What Gets Deployed

### Services Created

1. **r3sn-backend** (Web Service)
   - Main API server
   - REST endpoints
   - WebSocket support
   - Health checks
   - Auto-scaling ready

2. **r3sn-redis** (Redis Instance)
   - Caching layer
   - Queue management
   - Session storage
   - Pub/Sub messaging

3. **r3sn-worker** (Background Worker)
   - Workflow processing
   - Integration execution
   - Agent tasks
   - Heavy computations

4. **r3sn-ml-analytics** (Cron Job)
   - Runs every hour
   - ML insights generation
   - Pattern detection
   - Anomaly detection
   - Predictions

5. **r3sn-self-evolution** (Cron Job)
   - Runs every 6 hours
   - Self-improvement
   - Auto-optimization
   - Bug fixing
   - Code generation

---

## Environment Variables

### Auto-Configured

These are set automatically by `render.yaml`:

- `NODE_ENV=production`
- `PORT=3000`
- `ENABLE_CLUSTERING=true`
- `ENABLE_COMPRESSION=true`
- `ENABLE_ML_INSIGHTS=true`
- `ENABLE_SELF_EVOLVING=true`
- `ENABLE_SELF_DEBUGGING=true`
- `LOG_LEVEL=info`
- `ENABLE_METRICS=true`

### Auto-Generated

These are generated by Render:

- `JWT_SECRET` - Secure random string
- `ENCRYPTION_KEY` - Secure random string

### You Must Provide

- `MONGODB_URI` - Your MongoDB Atlas connection string

### Optional (Advanced)

```bash
# OpenAI Integration (for AI features)
OPENAI_API_KEY=sk-...

# SMTP (for email notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Custom Configuration
MAX_CONCURRENT_EXECUTIONS=100
EXECUTION_TIMEOUT=300000
WORKER_SCALE_THRESHOLD=0.8
```

---

## API Endpoints

Once deployed, you can access:

### Health & Monitoring

```bash
# Basic health check
GET /health

# Detailed health check
GET /health/detailed

# Metrics
GET /health/metrics
GET /health/metrics/workflows
GET /health/metrics/agents
GET /health/metrics/integrations
```

### Workflows

```bash
# Execute workflow
POST /api/workflows/execute

# Get execution status
GET /api/workflows/executions/:id

# List executions
GET /api/workflows/executions
```

### Agents

```bash
# Create agent
POST /api/agents

# List agents
GET /api/agents

# Execute agent
POST /api/agents/:id/execute
```

### Integrations

```bash
# List integrations
GET /api/integrations

# Connect integration
POST /api/integrations

# Execute integration
POST /api/integrations/:id/execute
```

---

## Testing Your Deployment

### 1. Health Check

```bash
curl https://your-app.onrender.com/health
```

### 2. Execute Simple Workflow

```bash
curl -X POST https://your-app.onrender.com/api/workflows/execute \
  -H "Content-Type: application/json" \
  -d '{
    "workflow": {
      "name": "Test Workflow",
      "nodes": [
        {
          "id": "1",
          "type": "http",
          "config": {
            "url": "https://api.github.com/users/github",
            "method": "GET"
          }
        }
      ],
      "edges": []
    }
  }'
```

### 3. Check Metrics

```bash
curl https://your-app.onrender.com/health/metrics
```

---

## Monitoring

### Render Dashboard

1. Go to [Render Dashboard](https://dashboard.render.com)
2. Select your service
3. View:
   - Logs (real-time)
   - Metrics (CPU, Memory, Network)
   - Events (deployments, restarts)
   - Settings

### Built-in Monitoring

Access metrics via API:

```bash
# All metrics
curl https://your-app.onrender.com/health/metrics

# Workflow metrics
curl https://your-app.onrender.com/health/metrics/workflows

# System metrics
curl https://your-app.onrender.com/health/metrics/system
```

---

## Scaling

### Automatic Scaling

Render automatically scales based on:
- CPU usage
- Memory usage
- Request volume

### Manual Scaling

1. Go to Render Dashboard
2. Select service
3. Settings ‚Üí Instance Count
4. Increase/decrease instances

### Cost-Effective Scaling

**Free Tier:**
- 1 web service instance
- 1 background worker
- 1 Redis instance (25MB)
- Unlimited cron jobs

**Paid Plans:**
- Multiple instances
- More memory/CPU
- Auto-scaling
- Priority support

---

## Troubleshooting

### Service Won't Start

1. Check logs in Render dashboard
2. Verify `MONGODB_URI` is correct
3. Ensure MongoDB Atlas allows connections from 0.0.0.0/0
4. Check all required env vars are set

### Database Connection Failed

```bash
# Test MongoDB connection
curl https://your-app.onrender.com/health/detailed
```

Look for `database.status` in response.

**Common Issues:**
- Wrong connection string
- IP not whitelisted in MongoDB Atlas
- Database user not created
- Wrong password

### Redis Connection Failed

Redis is automatically configured by Render. If issues:

1. Check Render dashboard for Redis service status
2. Verify Redis service is running
3. Check logs for connection errors

### Slow Performance

1. Check metrics: `curl https://your-app.onrender.com/health/metrics`
2. Enable caching (already enabled by default)
3. Upgrade Render plan for more resources
4. Scale to multiple instances

### Cron Jobs Not Running

1. Check Render dashboard ‚Üí Cron Jobs
2. View logs for each cron job
3. Verify schedule is correct
4. Check for errors in logs

---

## Updating Your Deployment

### Automatic Updates

Render automatically deploys when you push to GitHub:

```bash
git add .
git commit -m "Update feature"
git push origin main
```

Render will:
1. Detect push
2. Build application
3. Run health checks
4. Deploy if successful
5. Rollback if failed

### Manual Deploy

1. Go to Render Dashboard
2. Select service
3. Click "Manual Deploy"
4. Select branch
5. Click "Deploy"

---

## Cost Breakdown

### Free Tier (Perfect for Development)

- **Web Service**: Free (750 hours/month)
- **Background Worker**: Free (750 hours/month)
- **Redis**: Free (25MB)
- **Cron Jobs**: Free (unlimited)
- **MongoDB Atlas**: Free (512MB)

**Total: $0/month**

### Starter Plan (Production Ready)

- **Web Service**: $7/month (512MB RAM)
- **Background Worker**: $7/month
- **Redis**: $10/month (256MB)
- **MongoDB Atlas**: Free (512MB)

**Total: $24/month**

### Professional Plan (High Traffic)

- **Web Service**: $25/month (2GB RAM, auto-scale)
- **Background Worker**: $25/month
- **Redis**: $25/month (1GB)
- **MongoDB Atlas**: $9/month (2GB)

**Total: $84/month**

---

## Security Checklist

- [x] HTTPS enabled (automatic on Render)
- [x] Environment variables encrypted
- [x] JWT secrets auto-generated
- [x] MongoDB authentication enabled
- [x] Redis password protected
- [x] Rate limiting enabled
- [x] Input validation enabled
- [x] CORS configured
- [x] Security headers enabled
- [x] Audit logging enabled

---

## Next Steps

1. ‚úÖ Deploy to Render
2. ‚úÖ Verify health checks
3. ‚úÖ Test API endpoints
4. üìù Configure integrations
5. üîß Create workflows
6. üìä Monitor metrics
7. üöÄ Scale as needed

---

## Support

### Render Support
- [Documentation](https://render.com/docs)
- [Community Forum](https://community.render.com)
- [Status Page](https://status.render.com)

### R3SN Support
- [GitHub Issues](https://github.com/Nisu7648/R3SN/issues)
- [Documentation](/docs)
- Health Check: `https://your-app.onrender.com/health`

---

## Success! üéâ

Your R3SN platform is now live on Render!

**Your API:** `https://your-app.onrender.com`

**Test it:**
```bash
curl https://your-app.onrender.com/health
```

Happy automating! üöÄ
